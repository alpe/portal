<template>
    <require from="./memo-select/memo-select"></require>

    <div>
        <div show.bind="step='input'" class="input-step">
            <div class="row">
                <div class="col s12">
                    <label>Code</label>
                    <input type="text" value.bind="code" disabled.bind="lockCode" required
                           tt-validate="manager.bind:validationManager">
                </div>
                <div class="col s12" if.bind="code !== nativeAssetCode">
                    <label>Issuer</label>
                    <input type="text" value.bind="issuer" disabled.bind="lockIssuer" required
                           tt-validate="manager.bind:validationManager">
                </div>
                <div class="col s12">
                    <label>Amount</label>
                    <input type="number" value.bind="amount" required
                           tt-validate="manager.bind:validationManager">
                </div>
                <div class="col s12">
                    <label>Destination Account</label>
                    <input type="text" value.bind="destination" required
                           tt-validate="manager.bind:validationManager">
                </div>
                <memo-select repeat.for="memo of memos" validation-manager.bind="validationManager" type.bind="memo.type" value.bind="memo.value"></memo-select>
                <button type="button" class="btn accent" click.trigger="addMemo()">
                    Add Memo
                </button>
            </div>
            <button class="btn btn-large primary" click.delegate="submitInput()">
                <i class="fa fa-paper-plane-o"></i>&nbsp;Submit Payment
            </button>
        </div>
        <div show.bind="step='confirm'" class="confirm-step">
            <alert config.bind="alertConfig"></alert>
            <table>
                <tr>
                    <td class="label">Code</td>
                    <td class="value">${code}</td>
                </tr>
                <tr>
                    <td class="label">Issuer</td>
                    <td class="value">${code === nativeAssetCode ? 'Native' : issuer}</td>
                </tr>
                <tr>
                    <td class="label">Amount</td>
                    <td class="value">${amount}</td>
                </tr>
                <tr>
                    <td class="label">Destination</td>
                    <td class="value">${destination}</td>
                </tr>
            </table>
        </div>
        <div show.bind="step='confirm'" class="success-step">
            <alert config.bind="alertConfig"></alert>
        </div>
        <div show.bind="step='confirm'" class="failure-step">
            <alert config.bind="alertConfig"></alert>
        </div>
        <spinner-overlay show.bind="loading > 0"></spinner-overlay>
    </div>
</template>
