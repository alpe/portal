<template>
    <div class="card price-chart" collapsible-card="is-open:true">
        <div class="card-content">
            <div class="card-heading">
                <div class="card-title">
                    Chart
                </div>
                <i class="fa fa-refresh right ${loading > 0 ? 'fa-spin primary-text' : ''}" no-collapse click.trigger="refresh()"></i>
            </div>
            <div class="card-body">
                <i show.bind="!assetPair">Select an asset pair to get started.</i>
                <div show.bind="assetPair">
                    <div class="filters row">
                        <div class="form-field col m4">
                            <label>From</label>
                            <aurelia-flatpickr config.bind="{wrap:true}" value.bind="start">
                                <div class="input-group aurelia-flatpickr">
                                    <input type="text" class="form-control" placeholder="Select date" data-input>
                                    <div class="btn-group">
                                        <button class="btn btn-flat" type="button" data-clear><i class="fa fa-times"></i></button>
                                    </div>
                                </div>
                            </aurelia-flatpickr>
                        </div>
                        <div class="form-field col m4">
                            <label>To</label>
                            <aurelia-flatpickr config.bind="{wrap:true}" value.bind="end">
                                <div class="input-group aurelia-flatpickr">
                                    <input type="text" class="form-control" placeholder="Select date" data-input>
                                    <div class="btn-group">
                                        <button class="btn btn-flat" type="button" data-clear><i class="fa fa-times"></i></button>
                                    </div>
                                </div>
                            </aurelia-flatpickr>
                        </div>
                        <div class="form-field col m4">
                            <label>Interval</label>
                            <select md-select="disabled.bind:disabled" value.two-way="interval" change.trigger="refresh()">
                                <option value="300">5 Minutes</option>
                                <option value="900">15 Minutes</option>
                                <option value="1800">30 Minutes</option>
                                <option value="3600">1 Hour</option>
                                <option value="14400">4 Hours</option>
                                <option value="86400" selected>1 Day</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <div show.bind="noData">
                            <br>
                            <i>There is no trade data for the chosen asset pair.</i>
                        </div>
                        <div show.bind="!noData" class="chart-scroll">
                            <table class="current-data" show.bind="currentData">
                                <tr>
                                    <td>Open: ${currentData.open}</td>
                                    <td>Close: ${currentData.close}</td>
                                    <td>High: ${currentData.high}</td>
                                    <td>Low: ${currentData.low}</td>
                                </tr>
                                <tr>
                                    <td>Vol (${assetPair.buying.code}): ${currentData.buyingVolume}</td>
                                    <td>Vol (${assetPair.selling.code}): ${currentData.sellingVolume}</td>
                                    <td colspan="2">Date: ${currentData.date | formatDateTime}</td>
                                </tr>
                            </table>
                            <div class="chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>
